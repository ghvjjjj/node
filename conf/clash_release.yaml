BASE-DATA:
  mrs: &domain {type: http, interval: 86400, behavior: domain, format: mrs}
  mrsip: &mrsip {type: http, interval: 86400, behavior: ipcidr, format: mrs}

mixed-port: 8080
ipv6: true
tcp-concurrent: true
profile: {store-selected: true, store-fake-ip: true}

dns:
  enable: false
  ipv6: true
  prefer-h3: false
  respect-rules: false
  use-hosts: true
  use-system-hosts: true
  enhanced-mode: fake-ip
  fake-ip-filter-mode: whitelist
  fake-ip-filter: ["rule-set:Proxy,Ad"]
  nameserver: [https://dns.alidns.com/dns-query, 8.8.4.4, 208.67.222.222]

proxies: [ ]

proxy-groups:
  - name: 🔒Proxy
    type: select
    proxies: 
      - FALLBACK
      - SELECT
      - DIRECT
      - REJECT
  - name: ❌Reject
    type: select
    proxies: 
      - REJECT
      - PASS
  - name: 🌐Direct
    type: select
    proxies: 
      - DIRECT
      - "🔒Proxy"
  - name: SELECT
    type: select
    proxies: [ ]
  - name: FALLBACK
    type: fallback
    interval: 120
    url: "https://www.gstatic.com/generate_204"
    timeout: 900
    proxies: [ PROXY ]
    filter: "(?i)OpenAI"

rules:
  - RULE-SET,DirectFix,DIRECT
  # 广告拦截
  - PROCESS-NAME,com.android.packageinstaller,REJECT
  - PROCESS-NAME,cn.wps.moffice_eng,REJECT
  - RULE-SET,Ad,❌Reject
  # 最终规则
  - RULE-SET,Proxy,🔒Proxy
  - MATCH,🌐Direct
  
rule-providers: 
  Proxy: {<<: *domain, url: "https://github.com/ykvhjnn/mrs/raw/refs/heads/main/Proxy_Mihomo.mrs"}
  Ad: {<<: *domain, url: "https://github.com/ykvhjnn/mrs/raw/refs/heads/main/Ad_Mihomo.mrs"}
  DirectFix: {<<: *domain, url: "https://github.com/ykvhjnn/mrs/raw/refs/heads/main/Directfix_Mihomo.mrs"}
